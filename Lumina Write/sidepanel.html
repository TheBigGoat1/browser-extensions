<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lumina Write - AI Humanizer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="lumina-container">
        <!-- Glass Card - Main UI -->
        <div class="glass-card">
            <!-- Header -->
            <div class="header">
                <div class="logo">
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <path d="M16 2L20.18 10.26L29 11.27L22 16.14L23.18 23.02L16 19.77L8.82 23.02L10 16.14L3 11.27L11.82 10.26L16 2Z" 
                              fill="url(#gradient)" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                        <defs>
                            <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                    </svg>
                    <h1>Lumina Write</h1>
                </div>
                <div class="status-indicator" id="statusIndicator">
                    <span class="status-dot"></span>
                    <span class="status-text">Ready</span>
                </div>
            </div>

            <!-- Instructions -->
            <div class="instructions" id="instructions">
                <p>‚ú® Highlight text in Word Online to humanize it</p>
            </div>

            <!-- Writing Style Selector -->
            <div class="style-selector" id="styleSelector">
                <label class="style-label">Writing Style</label>
                <div class="style-buttons" id="styleButtons">
                    <button class="style-btn active" data-style="professional" title="Professional">
                        <span class="style-icon">üíº</span>
                        <span class="style-name">Professional</span>
                    </button>
                    <button class="style-btn" data-style="casual" title="Casual">
                        <span class="style-icon">üòä</span>
                        <span class="style-name">Casual</span>
                    </button>
                    <button class="style-btn" data-style="academic" title="Academic">
                        <span class="style-icon">üéì</span>
                        <span class="style-name">Academic</span>
                    </button>
                    <button class="style-btn" data-style="creative" title="Creative">
                        <span class="style-icon">‚ú®</span>
                        <span class="style-name">Creative</span>
                    </button>
                    <button class="style-btn" data-style="technical" title="Technical">
                        <span class="style-icon">‚öôÔ∏è</span>
                        <span class="style-name">Technical</span>
                    </button>
                </div>
            </div>

            <!-- Original Text Display -->
            <div class="text-section" id="originalSection" style="display: none;">
                <div class="section-label">Original Text</div>
                <div class="text-display original-text" id="originalText"></div>
            </div>

            <!-- View Toggle -->
            <div class="view-toggle" id="viewToggle" style="display: none;">
                <button class="view-btn active" data-view="humanized" id="viewHumanizedBtn">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <rect x="2" y="3" width="12" height="10" rx="1" stroke="currentColor" stroke-width="1.5"/>
                        <path d="M5 7L7 9L11 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                    Humanized
                </button>
                <button class="view-btn" data-view="compare" id="viewCompareBtn">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <rect x="1" y="2" width="6" height="12" rx="1" stroke="currentColor" stroke-width="1.5"/>
                        <rect x="9" y="2" width="6" height="12" rx="1" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                    Compare
                </button>
            </div>

            <!-- Humanized Output -->
            <div class="text-section" id="humanizedSection">
                <div class="section-header">
                    <div class="section-label">Humanized Text</div>
                    <div class="metrics-summary" id="metricsSummary" style="display: none;">
                        <div class="metric-item">
                            <span class="metric-label">Score</span>
                            <span class="metric-value" id="metricScore">--</span>
                        </div>
                    </div>
                </div>
                <div class="humanized-output" id="output">
                    <div class="placeholder-text">
                        <svg width="48" height="48" viewBox="0 0 48 48" fill="none" opacity="0.3">
                            <path d="M24 4L30.27 15.39L43 16.91L34 25.21L36.27 38L24 32.66L11.73 38L14 25.21L5 16.91L17.73 15.39L24 4Z" 
                                  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <p>Humanized text will appear here...</p>
                    </div>
                </div>
            </div>

            <!-- Compare View -->
            <div class="compare-view" id="compareView" style="display: none;">
                <div class="compare-column">
                    <div class="compare-header">Original</div>
                    <div class="compare-text" id="compareOriginal"></div>
                </div>
                <div class="compare-column">
                    <div class="compare-header">Humanized</div>
                    <div class="compare-text" id="compareHumanized"></div>
                </div>
            </div>

            <!-- Enhanced Metrics Panel -->
            <div class="metrics-panel glass-card" id="metricsPanel" style="display: none;">
                <div class="metrics-header">
                    <h3>Quality Metrics</h3>
                    <button class="close-btn" id="closeMetrics">√ó</button>
                </div>
                <div class="metrics-content">
                    <div class="metric-card">
                        <div class="metric-title">Human Score</div>
                        <div class="metric-large" id="metricHumanScore">--</div>
                        <div class="metric-description">Overall human-likeness</div>
                    </div>
                    <div class="metrics-grid">
                        <div class="metric-item-detailed">
                            <span class="metric-label-detailed">Perplexity</span>
                            <span class="metric-value-detailed" id="metricPerplexity">--</span>
                            <div class="metric-bar">
                                <div class="metric-bar-fill" id="metricPerplexityBar"></div>
                            </div>
                        </div>
                        <div class="metric-item-detailed">
                            <span class="metric-label-detailed">Burstiness</span>
                            <span class="metric-value-detailed" id="metricBurstiness">--</span>
                            <div class="metric-bar">
                                <div class="metric-bar-fill" id="metricBurstinessBar"></div>
                            </div>
                        </div>
                        <div class="metric-item-detailed">
                            <span class="metric-label-detailed">Readability</span>
                            <span class="metric-value-detailed" id="metricReadability">--</span>
                            <div class="metric-bar">
                                <div class="metric-bar-fill" id="metricReadabilityBar"></div>
                            </div>
                        </div>
                        <div class="metric-item-detailed">
                            <span class="metric-label-detailed">AI Risk</span>
                            <span class="metric-value-detailed" id="metricAIRisk">--</span>
                            <div class="metric-bar">
                                <div class="metric-bar-fill risk" id="metricAIRiskBar"></div>
                            </div>
                        </div>
                    </div>
                    <div class="metrics-stats">
                        <div class="stat-item">
                            <span class="stat-label">Words</span>
                            <span class="stat-value" id="statWords">--</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Sentences</span>
                            <span class="stat-value" id="statSentences">--</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Progress Bar -->
            <div class="progress-container" id="progressContainer" style="display: none;">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">0%</div>
            </div>

            <!-- Action Buttons -->
            <div class="actions" id="actions" style="display: none;">
                <button class="btn-primary" id="humanizeBtn">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                        <path d="M9 2L11.09 7.26L17 8.27L13 12.14L13.91 18.02L9 15.77L4.09 18.02L5 12.14L1 8.27L6.91 7.26L9 2Z" 
                              fill="currentColor"/>
                    </svg>
                    Humanize
                </button>
                <div class="action-group">
                    <button class="btn-secondary" id="copyBtn" title="Copy (Ctrl+Shift+C)">
                        <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                            <path d="M5.5 4.5H3.5C2.67157 4.5 2 5.17157 2 6V12.5C2 13.3284 2.67157 14 3.5 14H10C10.8284 14 11.5 13.3284 11.5 12.5V10.5M5.5 4.5C5.5 3.67157 6.17157 3 7 3H9.5C10.3284 3 11 3.67157 11 4.5V7M5.5 4.5C5.5 5.32843 6.17157 6 7 6H9.5" 
                                  stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        Copy
                    </button>
                    <button class="btn-secondary" id="replaceBtn" title="Replace (Ctrl+Shift+R)">
                        <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                            <path d="M3 9L15 9M9 3L15 9L9 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Replace
                    </button>
                    <button class="btn-secondary" id="exportBtn" title="Export">
                        <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                            <path d="M9 12V3M9 12L6 9M9 12L12 9M3 15H15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Export
                    </button>
                    <button class="btn-secondary" id="metricsBtn" title="View Metrics">
                        <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                            <rect x="2" y="8" width="3" height="8" rx="1" stroke="currentColor" stroke-width="1.5"/>
                            <rect x="6.5" y="5" width="3" height="11" rx="1" stroke="currentColor" stroke-width="1.5"/>
                            <rect x="11" y="2" width="3" height="14" rx="1" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                        Metrics
                    </button>
                </div>
            </div>

            <!-- Loading Indicator -->
            <div class="loading-indicator" id="loadingIndicator" style="display: none;">
                <div class="loading-spinner"></div>
                <span>Humanizing text...</span>
            </div>
        </div>

        <!-- Settings Toggle -->
        <button class="settings-toggle" id="settingsToggle">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M10 12.5C11.3807 12.5 12.5 11.3807 12.5 10C12.5 8.61929 11.3807 7.5 10 7.5C8.61929 7.5 7.5 8.61929 7.5 10C7.5 11.3807 8.61929 12.5 10 12.5Z" 
                      stroke="currentColor" stroke-width="1.5"/>
                <path d="M15.8333 10C15.8333 9.58333 15.9167 9.16667 16.0833 8.79167L17.9167 5.83333C18.1667 5.41667 18.0417 4.875 17.625 4.625L16.2083 3.79167C15.7917 3.54167 15.25 3.66667 15 4.08333L13.1667 7.04167C12.8333 7.41667 12.4167 7.5 12 7.5H8C7.58333 7.5 7.16667 7.41667 6.83333 7.04167L5 4.08333C4.75 3.66667 4.20833 3.54167 3.79167 3.79167L2.375 4.625C1.95833 4.875 1.83333 5.41667 2.08333 5.83333L3.91667 8.79167C4.08333 9.16667 4.16667 9.58333 4.16667 10C4.16667 10.4167 4.08333 10.8333 3.91667 11.2083L2.08333 14.1667C1.83333 14.5833 1.95833 15.125 2.375 15.375L3.79167 16.2083C4.20833 16.4583 4.75 16.3333 5 15.9167L6.83333 12.9583C7.16667 12.5833 7.58333 12.5 8 12.5H12C12.4167 12.5 12.8333 12.5833 13.1667 12.9583L15 15.9167C15.25 16.3333 15.7917 16.4583 16.2083 16.2083L17.625 15.375C18.0417 15.125 18.1667 14.5833 17.9167 14.1667L16.0833 11.2083C15.9167 10.8333 15.8333 10.4167 15.8333 10Z" 
                      stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </button>

        <!-- Settings Panel (Hidden by default) -->
        <div class="settings-panel glass-card" id="settingsPanel" style="display: none;">
            <div class="settings-header">
                <h3>Settings</h3>
                <button class="close-btn" id="closeSettings">√ó</button>
            </div>
            <div class="settings-content">
                <div class="setting-item">
                    <label>Temperature (Creativity)</label>
                    <input type="range" id="temperature" min="0.5" max="1.2" step="0.1" value="0.9">
                    <span class="setting-value" id="temperatureValue">0.9</span>
                </div>
                <div class="setting-item">
                    <label>Model</label>
                    <select id="model">
                        <option value="deepseek-chat">DeepSeek Chat</option>
                        <option value="deepseek-coder">DeepSeek Coder</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label>
                        <input type="checkbox" id="autoSave"> Auto-save to history
                    </label>
                </div>
                <div class="setting-item">
                    <label>
                        <input type="checkbox" id="showMetrics"> Show metrics by default
                    </label>
                </div>
                <div class="setting-item">
                    <label>
                        <input type="checkbox" id="compareView"> Enable compare view
                    </label>
                </div>
            </div>
        </div>

        <!-- History Panel -->
        <div class="history-panel glass-card" id="historyPanel" style="display: none;">
            <div class="history-header">
                <h3>History</h3>
                <div class="history-actions">
                    <button class="btn-small" id="clearHistoryBtn">Clear</button>
                    <button class="close-btn" id="closeHistory">√ó</button>
                </div>
            </div>
            <div class="history-content" id="historyContent">
                <div class="history-empty">No history yet</div>
            </div>
        </div>

        <!-- History Toggle -->
        <button class="history-toggle" id="historyToggle" title="View History">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <rect x="3" y="4" width="14" height="12" rx="2" stroke="currentColor" stroke-width="1.5"/>
                <path d="M3 8H17M7 12H17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
        </button>
    </div>

    <script src="storage.js"></script>
    <script src="sidepanel.js"></script>
</body>
</html>
